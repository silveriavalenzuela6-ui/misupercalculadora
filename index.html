document.addEventListener('DOMContentLoaded', mostrarTareas);

function agregar() {
    let input = document.getElementById("tarea");
    let nuevaTarea = input.value;
    if (nuevaTarea !== "") {
        guardarTareaLocal(nuevaTarea);
        crearElementoLista(nuevaTarea);
        input.value = ""; 
    }
}

function crearElementoLista(texto) {
    let li = document.createElement("li");
    li.innerHTML = `
        ${texto} 
        <button onclick="borrarTarea(this)" style="background:#ff4d4d; padding:2px 8px; font-size:12px;">X</button>
    `;
    document.getElementById("lista").appendChild(li);
}

function borrarTarea(elemento) {
    // Eliminar de la pantalla
    let li = elemento.parentElement;
    let textoTarea = li.firstChild.textContent.trim();
    li.remove();

    // Eliminar de la memoria (LocalStorage)
    let tareas = JSON.parse(localStorage.getItem("tareas"));
    let nuevasTareas = tareas.filter(t => t !== textoTarea);
    localStorage.setItem("tareas", JSON.stringify(nuevasTareas));
}

function guardarTareaLocal(tarea) {
    let tareas = localStorage.getItem("tareas") ? JSON.parse(localStorage.getItem("tareas")) : [];
    tareas.push(tarea);
    localStorage.setItem("tareas", JSON.stringify(tareas));
}

function mostrarTareas() {
    let tareas = localStorage.getItem("tareas") ? JSON.parse(localStorage.getItem("tareas")) : [];
    tareas.forEach(tarea => crearElementoLista(tarea));
}
